/**
 *Copyright (c) 2018-2019 DRRP-Team
 *
 *This software is released under the MIT License.
 *https://opensource.org/licenses/MIT
 */

class PlayerInputHandler: EventHandler {

    private bool extendedInput;

    override void OnRegister() {
        self.extendedInput = false;
        Super.OnRegister();
    }

    void UseExtendedInput(bool mode) {
        self.IsUiProcessor = mode;
        self.extendedInput = mode;
    }

    override void NetworkProcess(ConsoleEvent e) {
        if (e.Name == "ExtendedInput") UseExtendedInput(e.Args[0]);
        Super.NetworkProcess( e );
    }

    override bool UiProcess(UiEvent e) {
        if ( e.Type == e.Type_KeyDown ) DRRPUtil.ACS_NamedExecute("onInput", e.KeyChar);
        return Super.UiProcess( e );
    }

    override bool InputProcess( InputEvent e ) {
        if ( !self.extendedInput && e.Type == e.Type_KeyDown )
            DRRPUtil.ACS_NamedExecute("onInput", e.KeyChar, e.KeyScan);

        return false;
    } // of override bool InputProcess( InputEvent e ) {}

} // of class PlayerInputHandler : EventHandler {}

